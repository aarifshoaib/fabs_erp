<!-- Add Service Modal -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas_add" style="width: 1000px !important;">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Add New Service</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <form id="addServiceForm" method="post" action="{% url 'service_master_add' %}">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Service Code</label>
                        <input type="text" class="form-control" name="service_code" readonly>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Service Type</label>
                        <select class="form-select" name="service_type">
                            <option value="">Select Service Type</option>
                            {% for service_type in service_type_data %}
                                <option value="{{ service_type.base_value }}">{{ service_type.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Category</label>
                        <select class="form-select" name="category">
                            <option value="">Select Category</option>
                            {% for category in category_data %}
                                <option value="{{ category.base_value }}">{{ category.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Service Description</label>
                        <select class="form-select" name="service_description">
                            <option value="">Select Service Description</option>
                            {% for service_description in service_description_data %}
                                <option value="{{ service_description.base_value }}">{{ service_description.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Size</label>
                        <input type="text" class="form-control" name="size">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Unit</label>
                        <select class="form-select" name="unit">
                            <option value="">Select Unit</option>
                            {% for unit in unit_data %}
                                <option value="{{ unit.base_value }}">{{ unit.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Rate</label>
                        <input type="number" step="0.01" class="form-control" name="rate">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-select" name="is_active">
                            <option value="true">Active</option>
                            <option value="false">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label>Additional Information</label>
                        <textarea class="form-control" name="additional_information" rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="text-end mt-3">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="offcanvas">Cancel</button>
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Service Modal -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas_edit" style="width: 1000px !important;">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Edit Service</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <form id="editServiceForm" method="post" action="{% url 'service_master_edit' %}">
            {% csrf_token %}
            <input type="hidden" id="service_id" name="service_id">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Service Code</label>
                        <input type="text" class="form-control" id="service_code" name="service_code" readonly>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Service Type</label>
                        <select class="form-select" id="service_type" name="service_type">
                            <option value="">Select Service Type</option>
                            {% for service_type in service_type_data %}
                                <option value="{{ service_type.base_value }}">{{ service_type.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Category</label>
                        <select class="form-select" id="category" name="category">
                            <option value="">Select Category</option>
                            {% for category in category_data %}
                                <option value="{{ category.base_value }}">{{ category.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Service Description</label>
                        <select class="form-select" id="service_description" name="service_description">
                            <option value="">Select Service Description</option>
                            {% for service_description in service_description_data %}
                                <option value="{{ service_description.base_value }}">{{ service_description.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Size</label>
                        <input type="text" class="form-control" id="size" name="size">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Unit</label>
                        <select class="form-select" id="unit" name="unit">
                            <option value="">Select Unit</option>
                            {% for unit in unit_data %}
                                <option value="{{ unit.base_value }}">{{ unit.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Rate</label>
                        <input type="number" step="0.01" class="form-control" id="rate" name="rate">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-select" id="is_active" name="is_active">
                            <option value="true">Active</option>
                            <option value="false">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label>Additional Information</label>
                        <textarea class="form-control" id="additional_information" name="additional_information" rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="text-end mt-3">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="offcanvas">Cancel</button>
                <button type="submit" class="btn btn-primary edit-btn">Update</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Service Modal -->
<div class="modal fade" id="delete_service" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete Service</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this service?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>
            </div>
        </div>
    </div>
</div> 

<!-- Rate field doesn't accept -ve values -->
<script>
    $(document).ready(function() {
        $('input[name="rate"]').on('input', function() {
            if ($(this).val() < 0) {
                alert('Rate field doesnt accept -ve values');
                $(this).val(0);
            }
        });
    });
</script> 
<!-- Add Item Modal -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas_add" style="width: 1000px !important;">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Add New Item</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <form id="addItemForm" method="post" action="{% url 'item_master_add' %}">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Item Code</label>
                        <input type="text" class="form-control" name="item_code" readonly>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Material Type</label>
                        <select class="form-select" name="material_type">
                            <option value="">Select Material Type</option>
                            {% for material_type in material_type_data %}
                                <option value="{{ material_type.base_value }}">{{ material_type.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Category</label>
                        <select class="form-select" name="category">
                            <option value="">Select Category</option>
                            {% for category in category_data %}
                                <option value="{{ category.base_value }}">{{ category.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Item Description</label>
                        <select class="form-select" name="item_description">
                            <option value="">Select Item Description</option>
                            {% for item_description in item_description_data %}
                                <option value="{{ item_description.base_value }}">{{ item_description.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Model No</label>
                        <input type="text" class="form-control" name="model_no">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Capacity</label>
                        <input type="text" class="form-control" name="capacity">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Size</label>
                        <input type="text" class="form-control" name="size">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Thickness</label>
                        <input type="text" class="form-control" name="thickness">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Manufacturer</label>
                        <select class="form-select" name="manufacturer">
                            <option value="">Select Manufacturer</option>
                            {% for manufacturer in manufacturer_data %}
                                <option value="{{ manufacturer.base_value }}">{{ manufacturer.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Country of Origin</label>
                        <select class="form-select" name="country_of_origin">
                            <option value="">Select Country</option>
                            {% for country in country_data %}
                                <option value="{{ country.base_value }}">{{ country.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Specification / Standard</label>
                        <input type="text" class="form-control" name="specification_standard">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>UOM</label>
                        <select class="form-select" name="uom">
                            <option value="">Select UOM</option>
                            {% for uom in uom_data %}
                                <option value="{{ uom.uom }}">{{ uom.base_uom }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Rate</label>
                        <input type="number" step="0.01" class="form-control" name="rate">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-select" name="is_active">
                            <option value="true">Active</option>
                            <option value="false">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label>Additional Information</label>
                        <textarea class="form-control" name="additional_information" rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="text-end mt-3">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="offcanvas">Cancel</button>
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Item Modal -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvas_edit" style="width: 1000px !important;">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Edit Item</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <form id="editItemForm" method="post" action="{% url 'item_master_edit' %}">
            {% csrf_token %}
            <input type="hidden" id="item_id" name="item_id">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Item Code</label>
                        <input type="text" class="form-control" id="item_code" name="item_code" readonly>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Material Type</label>
                        <select class="form-select" id="material_type" name="material_type">
                            <option value="">Select Material Type</option>
                            {% for material_type in material_type_data %}
                                <option value="{{ material_type.base_value }}">{{ material_type.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Category</label>
                        <select class="form-select" id="category" name="category">
                            <option value="">Select Category</option>
                            {% for category in category_data %}
                                <option value="{{ category.base_value }}">{{ category.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Item Description</label>
                        <select class="form-select" id="item_description" name="item_description">
                            <option value="">Select Item Description</option>
                            {% for item_description in item_description_data %}
                                <option value="{{ item_description.base_value }}">{{ item_description.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Model No</label>
                        <input type="text" class="form-control" id="model_no" name="model_no">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Capacity</label>
                        <input type="text" class="form-control" id="capacity" name="capacity">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Size</label>
                        <input type="text" class="form-control" id="size" name="size">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Thickness</label>
                        <input type="text" class="form-control" id="thickness" name="thickness">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Manufacturer</label>
                        <select class="form-select" id="manufacturer" name="manufacturer">
                            <option value="">Select Manufacturer</option>
                            {% for manufacturer in manufacturer_data %}
                                <option value="{{ manufacturer.base_value }}">{{ manufacturer.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Country of Origin</label>
                        <select class="form-select" id="country_of_origin" name="country_of_origin">
                            <option value="">Select Country</option>
                            {% for country in country_data %}
                                <option value="{{ country.base_value }}">{{ country.base_description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Specification / Standard</label>
                        <input type="text" class="form-control" id="specification_standard" name="specification_standard">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>UOM</label>
                        <select class="form-select" id="uom" name="uom">
                            <option value="">Select UOM</option>
                            {% for uom in uom_data %}
                                <option value="{{ uom.uom }}">{{ uom.base_uom }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Rate</label>
                        <input type="number" step="0.01" class="form-control" id="rate" name="rate">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-select" id="is_active" name="is_active">
                            <option value="true">Active</option>
                            <option value="false">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label>Additional Information</label>
                        <textarea class="form-control" id="additional_information" name="additional_information" rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="text-end mt-3">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="offcanvas">Cancel</button>
                <button type="submit" class="btn btn-primary edit-btn">Update</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Item Modal -->
<div class="modal fade" id="delete_item" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete Item</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this item?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>
            </div>
        </div>
    </div>
</div> 

<!-- Rate and quantity fields doesnt accept -ve values -->
<script>
    $(document).ready(function() {
        $('input[name="rate"]').on('input', function() {
            if ($(this).val() < 0) {
                alert('Rate field doesnt accept -ve values');
                $(this).val(0);
            }
        });
    });
</script>
